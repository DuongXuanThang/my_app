import{r as l,j as e,B as o,T as L,a as y,ah as z,a3 as _,ai as $,ac as S,H as A}from"./index-hCZ2DAhL.js";import{D as H,P as N,M as K,A as V}from"./server-IQgQvYnm.js";import{F as W,E as X}from"./FileExcelOutlined-5WGZ9Cnz.js";function q(){const[C,k]=l.useState(!1),[G,d]=l.useState(""),[v,p]=l.useState(""),x=l.useRef(null),m=(t,n,s)=>{n(),d(t[0]),p(s)},w=t=>{t(),d("")},O=t=>({filterDropdown:({setSelectedKeys:n,selectedKeys:s,confirm:a,clearFilters:c,close:F})=>e.jsxs("div",{style:{padding:8},onKeyDown:r=>r.stopPropagation(),children:[e.jsx(_,{ref:x,placeholder:`Search ${t}`,value:s[0],onChange:r=>n(r.target.value?[r.target.value]:[]),onPressEnter:()=>m(s,a,t),style:{marginBottom:8,display:"block"}}),e.jsxs($,{children:[e.jsx(o,{type:"primary",onClick:()=>m(s,a,t),icon:e.jsx(S,{}),size:"small",style:{width:90},children:"Search"}),e.jsx(o,{onClick:()=>c&&w(c),size:"small",style:{width:90},children:"Reset"}),e.jsx(o,{type:"link",size:"small",onClick:()=>{a({closeDropdown:!1}),d(s[0]),p(t)},children:"Filter"}),e.jsx(o,{type:"link",size:"small",onClick:()=>{F()},children:"close"})]})]}),filterIcon:n=>e.jsx(S,{style:{color:n?"#1677ff":void 0}}),onFilter:(n,s)=>s[t].toString().toLowerCase().includes(n.toLowerCase()),onFilterDropdownOpenChange:n=>{n&&setTimeout(()=>x.current?.select(),100)},render:n=>n}),[D,E]=l.useState([]),[h,j]=l.useState([]),[T,i]=l.useState(!1);l.useEffect(()=>{(async()=>{try{i(!0);const n=await V.get('/api/resource/DashboardRetail?fields=["*"]');if(n&&n.data){const s=n.data.map(a=>{const c=a.check_latitude+""+a.check_longitude;return{...a,key:a.name,location:c}});E(s)}}catch(n){console.error("Error fetching data:",n)}finally{i(!1)}})()},[]);const I=()=>{i(!0),setTimeout(()=>{j([]),i(!1)},1e3)},R={selectedRowKeys:h,onChange:t=>{console.log("selectedRowKeys changed: ",t),j(t)}},g=h.length>0,b=[{title:"ID",dataIndex:"name",...O("name")},{title:"Mã điểm bán",dataIndex:"retail",render:t=>e.jsx(y,{placement:"topLeft",title:t,children:t})},{title:"Vị trí",dataIndex:"location",render:t=>e.jsx(y,{title:`${t}`,children:e.jsx(z,{style:{color:"green",cursor:"pointer"}})}),onCell:()=>({onClick:t=>{console.log("123")}})},{title:"Ngày checkin",dataIndex:"check_in_date"},{title:"Ngày tạo",dataIndex:"creation"},{title:"",dataIndex:"",render:()=>e.jsx(o,{onClick:()=>f(!0),icon:e.jsx(X,{})})}],[M,u]=l.useState(!1),f=(t=!1)=>{k(t),u(!0)},P=()=>{u(!1)},B=()=>{u(!1)};return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[g&&e.jsx(o,{type:"primary",danger:!0,ghost:!0,onClick:I,loading:T,icon:e.jsx(H,{}),children:"Xóa"}),e.jsx("span",{style:{marginLeft:8},children:g?`Đã chọn ${h.length} báo cáo`:""})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{paddingRight:"10px"},children:e.jsx(o,{type:"primary",icon:e.jsx(W,{}),children:"Tải xuống"})}),e.jsx(o,{type:"primary",icon:e.jsx(N,{}),onClick:()=>f(!1),children:"Thêm mới"})]})]}),e.jsx(L,{rowSelection:R,columns:b,dataSource:D}),e.jsxs(K,{title:C?"Sửa":"Thêm mới",open:M,onOk:P,onCancel:B,children:[e.jsx("p",{children:"Some contents..."}),e.jsx("p",{children:"Some contents..."}),e.jsx("p",{children:"Some contents..."})]})]})}function Z(){return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsx("title",{children:"BÁO CÁO"})}),e.jsx(q,{})]})}export{Z as default};
