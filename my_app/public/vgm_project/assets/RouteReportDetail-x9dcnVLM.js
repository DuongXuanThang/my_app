import{r as a,a9 as e,W as o,aP as z,aQ as y,aR as B,aD as _,aS as $,aK as S,ab as A}from"./index-1UXu_NXu.js";import{D as K,P as N,M as W,A as H}from"./server-w4x0LLHB.js";import{F as Q,E as V}from"./FileExcelOutlined-ThqW-Qs6.js";function X(){const[C,k]=a.useState(!1),[q,d]=a.useState(""),[v,p]=a.useState(""),x=a.useRef(null),m=(t,n,s)=>{n(),d(t[0]),p(s)},w=t=>{t(),d("")},D=t=>({filterDropdown:({setSelectedKeys:n,selectedKeys:s,confirm:l,clearFilters:r,close:L})=>e.jsxs("div",{style:{padding:8},onKeyDown:c=>c.stopPropagation(),children:[e.jsx(_,{ref:x,placeholder:`Search ${t}`,value:s[0],onChange:c=>n(c.target.value?[c.target.value]:[]),onPressEnter:()=>m(s,l,t),style:{marginBottom:8,display:"block"}}),e.jsxs($,{children:[e.jsx(o,{type:"primary",onClick:()=>m(s,l,t),icon:e.jsx(S,{}),size:"small",style:{width:90},children:"Search"}),e.jsx(o,{onClick:()=>r&&w(r),size:"small",style:{width:90},children:"Reset"}),e.jsx(o,{type:"link",size:"small",onClick:()=>{l({closeDropdown:!1}),d(s[0]),p(t)},children:"Filter"}),e.jsx(o,{type:"link",size:"small",onClick:()=>{L()},children:"close"})]})]}),filterIcon:n=>e.jsx(S,{style:{color:n?"#1677ff":void 0}}),onFilter:(n,s)=>s[t].toString().toLowerCase().includes(n.toLowerCase()),onFilterDropdownOpenChange:n=>{n&&setTimeout(()=>x.current?.select(),100)},render:n=>n}),[O,E]=a.useState([]),[h,g]=a.useState([]),[R,i]=a.useState(!1);a.useEffect(()=>{(async()=>{try{i(!0);const n=await H.get('/api/resource/DashboardRetail?fields=["*"]');if(n&&n.data){const s=n.data.map(l=>{const r=l.check_latitude+""+l.check_longitude;return{...l,key:l.name,location:r}});E(s)}}catch(n){console.error("Error fetching data:",n)}finally{i(!1)}})()},[]);const I=()=>{i(!0),setTimeout(()=>{g([]),i(!1)},1e3)},T={selectedRowKeys:h,onChange:t=>{console.log("selectedRowKeys changed: ",t),g(t)}},j=h.length>0,b=[{title:"ID",dataIndex:"name",...D("name")},{title:"Mã điểm bán",dataIndex:"retail",render:t=>e.jsx(y,{placement:"topLeft",title:t,children:t})},{title:"Vị trí",dataIndex:"location",render:t=>e.jsx(y,{title:`${t}`,children:e.jsx(B,{style:{color:"green",cursor:"pointer"}})}),onCell:()=>({onClick:t=>{console.log("123")}})},{title:"Ngày checkin",dataIndex:"check_in_date"},{title:"Ngày tạo",dataIndex:"creation"},{title:"",dataIndex:"",render:()=>e.jsx(o,{onClick:()=>f(!0),icon:e.jsx(V,{})})}],[P,u]=a.useState(!1),f=(t=!1)=>{k(t),u(!0)},M=()=>{u(!1)},F=()=>{u(!1)};return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[j&&e.jsx(o,{type:"primary",danger:!0,ghost:!0,onClick:I,loading:R,icon:e.jsx(K,{}),children:"Xóa"}),e.jsx("span",{style:{marginLeft:8},children:j?`Đã chọn ${h.length} báo cáo`:""})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{paddingRight:"10px"},children:e.jsx(o,{type:"primary",icon:e.jsx(Q,{}),children:"Tãi xuống"})}),e.jsx(o,{type:"primary",icon:e.jsx(N,{}),onClick:()=>f(!1),children:"Thêm mới"})]})]}),e.jsx(z,{rowSelection:T,columns:b,dataSource:O}),e.jsxs(W,{title:C?"Sửa":"Thêm mới",open:P,onOk:M,onCancel:F,children:[e.jsx("p",{children:"Some contents..."}),e.jsx("p",{children:"Some contents..."}),e.jsx("p",{children:"Some contents..."})]})]})}function Z(){return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsx("title",{children:"BÁO CÁO"})}),e.jsx(X,{})]})}export{Z as default};
